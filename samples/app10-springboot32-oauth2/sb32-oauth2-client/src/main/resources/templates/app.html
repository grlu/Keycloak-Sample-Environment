<!DOCTYPE html>
<html lang="en">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Spring OAuth2/OIDC Client Thymeleaf</title>
    <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" ></link>
  </head>

  <body>
    <nav class="navbar navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" th:href="@{/app}">Spring OAuth2/OIDC Client Thymeleaf</a>
        <div class="d-flex">
          <span class="navbar-text">Hi, <span th:text="${fullname}">fullname</span>&nbsp;&nbsp;&nbsp;</span>
          <span class="nav-item"><a th:href="@{/logout}" class="btn btn-outline-secondary">Logout</a></span>
          <form style="margin-left: 1em" method="post" action="/logout">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"></input>
            <input class="btn btn-outline-secondary" type="submit" value="Instant Logout"></input>
          </form>
        </div>
      </div>
    </nav>

    <div class="container">
      <h1 style="margin-top: 0.5em; margin-bottom: 1em;">App</h1>

      <table class="table table-striped">
        <tbody>
          <tr>
            <th width='25%'>Issuer</th>
            <td th:text="${issuer}"></td>
          </tr>
        </tbody>
      </table>

      <h2>Principal</h2>

      <nav style="margin-top: 2em">
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <a class="nav-link active" id="nav-principal-getter-tab" data-bs-toggle="tab" href="#nav-principal-getter" role="tab" aria-controls="nav-principal-getter" aria-selected="true">Getter</a>
          <a class="nav-link" id="nav-principal-attributes-tab" data-bs-toggle="tab" href="#nav-principal-attributes" role="tab" aria-controls="nav-principal-attributes" aria-selected="false">Attributes</a>
          <a class="nav-link" id="nav-principal-claims-tab" data-bs-toggle="tab" href="#nav-principal-claims" role="tab" aria-controls="nav-principal-claims" aria-selected="false">Claims</a>
          <a class="nav-link" id="nav-principal-address-tab" data-bs-toggle="tab" href="#nav-principal-address" role="tab" aria-controls="nav-principal-address" aria-selected="false">Address</a>
        </div>
      </nav>

      
      <div class="tab-content" id="nav-tabContent">
        
        <div class="tab-pane fade show active" id="nav-principal-getter" role="tabpanel" aria-labelledby="nav-principal-getter-tab">
          <table class="table table-striped">
            <tbody>
              <tr th:each="entry : ${pgetter}">
                <th width='25%' th:text="${entry.key}"></th>
                <td th:text="${entry.value}"></td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="tab-pane fade" id="nav-principal-attributes" role="tabpanel" aria-labelledby="nav-principal-attributes-tab">
          <table class="table table-striped">
            <tbody>
              <tr th:each="entry : ${pattributes}">
                <th width='25%' th:text="${entry.key}"></th>
                <td th:text="${entry.value}"></td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="tab-pane fade" id="nav-principal-claims" role="tabpanel" aria-labelledby="nav-principal-claims-tab">
          <table class="table table-striped">
            <tbody>
              <tr th:each="entry : ${pclaims}">
                <th width='25%' th:text="${entry.key}"></th>
                <td th:text="${entry.value}"></td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="tab-pane fade" id="nav-principal-address" role="tabpanel" aria-labelledby="nav-principal-address-tab">
          <table class="table table-striped">
            <tbody>
              <tr th:each="entry : ${paddress}">
                <th width='25%' th:text="${entry.key}"></th>
                <td th:text="${entry.value}"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <ul>
        <li><a target="_blank" th:href="@{/principal}">principal</a></li>
        <li><a target="_blank" th:href="@{/principal-attributes}">principal attributes</a></li>
        <li><a target="_blank" th:href="@{/principal-userinfo}">principal userinfo</a></li>
        <li><a target="_blank" th:href="@{/principal-idtoken}">principal idToken</a></li>
        <li><a target="_blank" th:href="@{/accesstoken}">access token</a></li>
      </ul>

      <p>
        <a target="_blank" th:href="@{/build-properties}">build properties</a>
      </p>
    </div>

    <script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
  </body>
</html>